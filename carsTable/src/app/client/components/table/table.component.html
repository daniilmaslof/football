<mat-form-field>

  <input matInput placeholder="Search cars" [formControl]="searchField">

</mat-form-field>
<mat-spinner class="spinner"
             color="primary"
             *ngIf="dataSource.loading$| async">
</mat-spinner>

<mat-table class="cars-table mat-elevation-z8"
           [dataSource]="dataSource"
           matSort
           (matSortChange)="sortTableChange($event)"
           matSortDisableClear>

  <ng-container matColumnDef="id">

    <mat-header-cell *matHeaderCellDef mat-sort-header>id</mat-header-cell>

    <mat-cell *matCellDef="let car">{{car.id}}</mat-cell>

  </ng-container>
  <ng-container matColumnDef="make">

    <mat-header-cell *matHeaderCellDef mat-sort-header>make</mat-header-cell>

    <mat-cell *matCellDef="let car">{{car.make.name}}</mat-cell>

  </ng-container>
  <ng-container matColumnDef="carModel">

    <mat-header-cell *matHeaderCellDef mat-sort-header>carModel</mat-header-cell>

    <mat-cell *matCellDef="let car">{{car.model.name}}</mat-cell>

  </ng-container>
  <ng-container matColumnDef="bodyType">

    <mat-header-cell *matHeaderCellDef mat-sort-header>bodyType</mat-header-cell>

    <mat-cell *matCellDef="let car">{{car.bodyType.name}}</mat-cell>

  </ng-container>
  <ng-container matColumnDef="year">

    <mat-header-cell *matHeaderCellDef mat-sort-header>year</mat-header-cell>

    <mat-cell *matCellDef="let car">{{car.year}}</mat-cell>

  </ng-container>
  <ng-container matColumnDef="mileage">

    <mat-header-cell *matHeaderCellDef mat-sort-header>mileage</mat-header-cell>

    <mat-cell *matCellDef="let car">{{car.mileage}}</mat-cell>

  </ng-container>
  <ng-container matColumnDef="description">

    <mat-header-cell *matHeaderCellDef mat-sort-header>description</mat-header-cell>

    <mat-cell *matCellDef="let car">{{car.description}}</mat-cell>

  </ng-container>
  <ng-container matColumnDef="created">

    <mat-header-cell *matHeaderCellDef mat-sort-header>created</mat-header-cell>

    <mat-cell *matCellDef="let car">{{car.created | date: "yy-mm-dd"}}</mat-cell>

  </ng-container>
  <ng-container matColumnDef="updated">

    <mat-header-cell *matHeaderCellDef mat-sort-header>updated</mat-header-cell>

    <mat-cell *matCellDef="let car">{{car.updated | date: "yy-mm-dd"}}</mat-cell>

  </ng-container>

  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>

</mat-table>
<mat-paginator [length]="(dataSource.pagination$ | async)?.total"
               [hidePageSize]="true"
               [pageIndex]="(dataSource.pagination$ | async)?.currentPage"
               [pageSize]="(dataSource.pagination$ | async)?.perPage"
               (page)="changePage($event)">

</mat-paginator>
<mat-error>{{dataSource.error$ | async}}</mat-error>

